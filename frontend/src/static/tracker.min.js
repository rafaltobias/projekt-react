/**
 * Visit Tracker - Minified version for production
 */
!function(){const e="http://localhost:5000/api/track",t="visitor_tracker_session_id";function n(){let e=sessionStorage.getItem(t);return e||(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),sessionStorage.setItem(t,e)),e}function o(){const e=navigator.userAgent;let t="Unknown";return e.indexOf("Firefox")>-1?t="Firefox":e.indexOf("SamsungBrowser")>-1?t="Samsung Browser":e.indexOf("Opera")>-1||e.indexOf("OPR")>-1?t="Opera":e.indexOf("Edge")>-1||e.indexOf("Edg")>-1?t="Edge":e.indexOf("Chrome")>-1?t="Chrome":e.indexOf("Safari")>-1?t="Safari":(e.indexOf("MSIE")>-1||e.indexOf("Trident")>-1)&&(t="Internet Explorer"),t}function r(){const e=navigator.userAgent;let t="Unknown";return e.indexOf("Windows NT 10.0")>-1?t="Windows 10":e.indexOf("Windows NT 6.3")>-1?t="Windows 8.1":e.indexOf("Windows NT 6.2")>-1?t="Windows 8":e.indexOf("Windows NT 6.1")>-1?t="Windows 7":e.indexOf("Windows NT")>-1?t="Windows":/iPhone|iPad|iPod/.test(e)?t="iOS":e.indexOf("Android")>-1?t="Android":e.indexOf("Mac")>-1?t="macOS":e.indexOf("Linux")>-1&&(t="Linux"),t}function i(){return/Mobi|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?/iPad|Tablet|Android(?!.*Mobile)/i.test(navigator.userAgent)?"Tablet":"Mobile":"Desktop"}function a(){try{const a=sessionStorage.getItem(t);if(a){const t={page_url:window.location.href,session_id:a,is_entry_page:!1,is_exit_page:!0};navigator.sendBeacon?navigator.sendBeacon(e,JSON.stringify(t)):fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),keepalive:!0}).catch(()=>{})}}catch(e){console.error("Error in tracking exit page:",e)}}function s(t=!1){try{const a=n(),s=o(),c=r(),d=i(),l={page_url:window.location.href,referrer:document.referrer,browser:s,os:c,device:d,session_id:a,is_entry_page:t,is_exit_page:!1};fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then(e=>e.json()).then(e=>{console.debug("Tracking data sent successfully",e)}).catch(e=>{console.error("Error sending tracking data:",e)})}catch(e){console.error("Error in tracking visit:",e)}}const c=!sessionStorage.getItem(t);s(c),window.addEventListener("beforeunload",a),document.addEventListener("visibilitychange",(function(){if("hidden"===document.visibilityState){const t={page_url:window.location.href,session_id:n(),is_entry_page:!1,is_exit_page:!0};navigator.sendBeacon&&navigator.sendBeacon(e,JSON.stringify(t))}})),window.VisitTracker={trackEvent:function(t,o){try{const r=n(),i={page_url:window.location.href,session_id:r,is_entry_page:!1,is_exit_page:!1,event_name:t,event_data:o};fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(e=>e.json()).catch(e=>{console.error("Error sending event data:",e)})}catch(e){console.error("Error in tracking event:",e)}}}}();
